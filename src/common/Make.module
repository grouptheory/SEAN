# -*-makefile-*-

# This is a symbolic link to /src/common/Make.module
# Please do not edit this file.
RELINK=ifneeded
MODULE_LEVEL=MODULE	

include Make.local

all:	library execs

library: 
	@ UM_SHUTUP="yes" MAKE="${MAKE}" MFLAGS="${MFLAGS}" OPT="${OPT}" \
	  ${TOP}/src/common/forall-nonexempt-subdirs library library ; \
	  ${MAKE} --no-print-directory link-the-lib \
		REAL_RELINK=${RELINK} MODULE_LEVEL=MODULE

clean::	
	${checkauth}
	${checkowner}
	@MAKE="${MAKE}" ${COMMON}/forall-nonexempt-subdirs clean clean
	rm -f ${MODULELIB}

distclean:: clean
	@MAKE="${MAKE}" ${COMMON}/forall-nonexempt-subdirs clean distclean
	rm -rf ./lib* _o.* */_o.*

depend::
	@MAKE="${MAKE}" ${COMMON}/forall-nonexempt-subdirs depend depend

execs:	
	@MAKE="${MAKE}" OPT="${OPT}" ${COMMON}/forall-nonexempt-subdirs execs all

ifeq (${REAL_RELINK},ifneeded)
  ALLOBJS=${shell /bin/ls ${OBJDIR}/*.${OTYPE}}

  ${MODULELIB}: ${ALLOBJS}
	${BINDMODULE}
	@echo Linking done with \'${BINDMODULE}\'
  link-the-lib: ${MODULELIB}
	@true
else
  ifeq (${REAL_RELINK},no)
     link-the-lib:
	@echo Linking suppressed by RELINK=no
  else
    link-the-lib:
	${BINDMODULE}
	@echo Linking done with \'${BINDMODULE}\'
  endif
endif
